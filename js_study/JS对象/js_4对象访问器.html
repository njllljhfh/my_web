<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JavaScript 对象访问器</title>
  <style type="text/css">
    .code_marked {
      color: #d04e5c;
    }
  </style>
</head>
<body>
  <a href="https://www.w3school.com.cn/js/js_object_accessors.asp">JavaScript 对象访问器</a>
  <hr/>


  <div>
    <h2>JavaScript 访问器（Getter 和 Setter）</h2>
    <p>ECMAScript 5 (2009) 引入了 Getter 和 Setter。</p>
    <p>Getter 和 Setter 允许您定义对象访问器（被计算的属性）。</p>
  </div>
  <hr/>


  <div>
    <h2>JavaScript Getter（get 关键词）</h2>
    <p>本例使用 <span class="code_marked">lang</span> 属性来获取 <span class="code_marked">language</span> 属性的值。</p>
    <h3>实例</h3>
    <p id="demo1"></p>
    <script>
      // 创建对象：
      var person1 = {
        firstName: "Bill",
        lastName: "Gates",
        language: "en",
        get lang() {
          return this.language;
        }
      };
      // 使用 getter 显示来自对象的数据：
      document.getElementById("demo1").innerHTML = person1.lang;
    </script>
  </div>
  <hr/>


  <div>
    <h2>JavaScript Setter（set 关键词）</h2>
    <p>本例使用 <span class="code_marked">lang</span> 属性来设置 <span class="code_marked">language</span> 属性的值。</p>
    <h3>实例</h3>
    <p id="demo2"></p>
    <script>
      // Create an object:
      var person2 = {
        firstName: "Bill",
        lastName: "Gates",
        language: "en",
        set lang(value) {
          this.language = value;
        }
      };
      // 使用 set 设置属性：
      person2.lang = "zh";
      // 显示对象的数据：
      document.getElementById("demo2").innerHTML = person2.language;
    </script>
  </div>
  <hr/>


  <div>
    <h2>JavaScript 函数还是 Getter？</h2>
    <p>下面两个例子的区别在哪里？</p>
    <h3>例子 1</h3>
    <p>可以使用存储为函数的属性来访问对象数据。</p>
    <p id="demo3"></p>
    <script>
      // 创建对象：
      var person3 = {
        firstName: "Bill",
        lastName: "Gates",
        fullName: function () {
          return this.firstName + " " + this.lastName;
        }
      };
      // 使用方法显示对象的数据：
      document.getElementById("demo3").innerHTML = person3.fullName();
    </script>
    <br>


    <h3>例子 2</h3>
    <p>可以使用 getter 访问对象数据。</p>
    <p id="demo4"></p>
    <script>
      // 创建对象：
      var person4 = {
        firstName: "Bill",
        lastName: "Gates",
        get fullName() {
          return this.firstName + " " + this.lastName;
        }
      };
      // 使用 getter 显示对象的数据：
      document.getElementById("demo4").innerHTML = person4.fullName;
    </script>
    <br>

    <p>例子 1 以函数形式访问 fullName：person.fullName()。</p>
    <p>例子 2 以属性形式访问 fullName：person.fullName。</p>
    <p>第二个例子提供了更简洁的语法。</p>
  </div>
  <hr/>


  <div>
    <h2>数据质量</h2>
    <p>使用 getter 和 setter 时，JavaScript 可以确保更好的数据质量。</p>
    <p>在本例中，使用 <span class="code_marked">lang</span> 属性以大写形式返回 <span class="code_marked">language</span> 属性的值：</p>
    <h3>实例</h3>
    <p id="demo5"></p>
    <script>
      // 创建对象：
      var person5 = {
        firstName: "Bill",
        lastName: "Gates",
        language: "en",
        get lang() {
          return this.language.toUpperCase();
        }
      };
      // 使用 getter 显示对象的数据：
      document.getElementById("demo5").innerHTML = person5.lang;
    </script>
    <br>


    <p>在本例中，使用 <span class="code_marked">lang</span> 属性将大写值存储在 <span class="code_marked">language</span> 属性中：</p>
    <h3>实例</h3>
    <p id="demo6"></p>
    <script>
      // 创建对象：
      var person6 = {
        firstName: "Bill",
        lastName: "Gates",
        language: "",
        set lang(lang) {
          this.language = lang.toUpperCase();
        }
      };
      // 使用 set 设置属性：
      person6.lang = "en";
      // 显示对象的数据：
      document.getElementById("demo6").innerHTML = person6.language;
    </script>
  </div>
  <hr/>


  <div>
    <h2>为什么使用 Getter 和 Setter？</h2>
    <ul>
      <li>它提供了更简洁的语法</li>
      <li>它允许属性和方法的语法相同</li>
      <li>它可以确保更好的数据质量</li>
      <li>有利于后台工作</li>
    </ul>
  </div>
  <hr/>


  <div>
    <h2>一个计数器实例</h2>
    <h3>实例</h3>
    <p>创建完美的计数器对象：</p>
    <p id="demo7"></p>
    <script>
      var obj7 = {
        counter: 0,
        get reset() {
          this.counter = 0;
        },
        get increment() {
          this.counter++;
        },
        get decrement() {
          this.counter--;
        },
        set add(value) {
          this.counter += value;
        },
        set subtract(value) {
          this.counter -= value;
        }
      };
      // 操作计数器：
      obj7.reset;
      obj7.add = 5;
      obj7.subtract = 1;
      obj7.increment;
      obj7.decrement;
      // 显示计数器：
      document.getElementById("demo7").innerHTML = obj7.counter;
    </script>
  </div>
  <hr/>


  <div>
    <p><span class="code_marked">Object.defineProperty()</span> 方法也可用于添加 Getter 和 Setter：</p>
    <h3>实例</h3>
    <p id="demo8"></p>
    <script>
      // 定义对象
      var obj8 = {counter: 0};

      // 定义 Setter 和 Getter
      Object.defineProperty(obj8, "reset", {
        get: function () {
          this.counter = 0;
        }
      });
      Object.defineProperty(obj8, "increment", {
        get: function () {
          this.counter++;
        }
      });
      Object.defineProperty(obj8, "decrement", {
        get: function () {
          this.counter--;
        }
      });
      Object.defineProperty(obj8, "add", {
        set: function (value) {
          this.counter += value;
        }
      });
      Object.defineProperty(obj8, "subtract", {
        set: function (value) {
          this.counter -= value;
        }
      });

      // 操作计数器：
      obj8.reset;
      obj8.add = 5;
      obj8.subtract = 1;
      obj8.increment;
      obj8.decrement;
      document.getElementById("demo8").innerHTML = obj8.counter;
    </script>
  </div>
  <hr/>


  <div>
    <h2>浏览器支持</h2>
    <p>Internet Explorer 8 或更早的版本不支持 Getter 和 Setter：</p>
  </div>
  <hr/>

</body>
</html>