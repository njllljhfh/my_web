<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JavaScript 提升（Hoisting）</title>
</head>
<body>
  <a href="https://www.w3school.com.cn/js/js_hoisting.asp">JavaScript 提升（Hoisting）</a>
  <hr>


  <h2>提升（Hoisting）是 JavaScript 将声明移至顶部的默认行为。</h2>
  <hr>


  <div>
    <h1>JavaScript 声明会被提升</h1>
    <p>在 JavaScript 中，可以在使用变量之后对其进行声明。</p>
    <p>换句话说，可以在声明变量之前使用它。</p>
    <p>例子 1 与例子 2 的结果相同：</p>

    <p>例子 1</p>
    <p id="demo_1"></p>
    <script>
      x_1 = 5; // 把 5 赋值给 x_1

      elem_1 = document.getElementById("demo_1"); // 查找元素
      elem_1.innerHTML = x_1;           // 在这个元素中显示 x_1

      var x_1; // Declare x_1
    </script>
    <br>


    <p>例子 2</p>
    <p id="demo_2"></p>
    <script>
      var x_2; // 声明 x_2
      x_2 = 5; // 把 5 赋值给 x_2

      elem_2 = document.getElementById("demo_2"); // 查找元素
      elem_2.innerHTML = x_2;           // 在这个元素中显示 x_2
    </script>
    <p>为了理解这一点，您必须理解术语 "hoisting"。</p>
    <p>Hoisting 是 JavaScript 将所有声明提升到当前作用域顶部的默认行为（提升到当前脚本或当前函数的顶部）。</p>
  </div>
  <hr>


  <div>
    <h1>let 和 const 关键字</h1>
    <p>用 let 或 const 声明的变量和常量不会被提升！</p>
    <p>请在
      <a href="https://www.w3school.com.cn/js/js_let.asp" title="JavaScript Let">JS Let</a> /
      <a href="https://www.w3school.com.cn/js/js_const.asp" title="JavaScript Const">Const</a>
      中阅读更多关于 let 和 const 的内容。
    </p>
  </div>
  <hr>


  <div>
    <h1>JavaScript 初始化不会被提升</h1>
    <p>JavaScript 只提升声明，而非初始化。</p>
    <p>例子 1 与例子 2 的结果不相同：</p>
    <h3>例子 1</h3>
    <p id="demo_3"></p>
    <script>
      var x_3 = 5; // 初始化 x_3
      var y_3 = 7; // 初始化 y_3

      elem_3 = document.getElementById("demo_3"); // 查找元素
      elem_3.innerHTML = x_3 + " " + y_3;       // 显示 x 和 y
    </script>
    <br>


    <h3>例子 2</h3>
    <p id="demo_4"></p>
    <script>
      var x_4 = 5;  // 初始化 x_4

      elem_4 = document.getElementById("demo_4");      // 查找元素
      elem_4.innerHTML = "x is " + x_4 + " and y is " + y_4;  // 显示 x 和 y

      var y_4 = 7;  // Initialize y_4
    </script>
    <p>最后一个例子中的 y 仍然是未定义能说得通吗？</p>
    <p>这是因为只有声明（var y）而不是初始化（=7）被提升到顶部。</p>
    <p>由于 hoisting，y 在其被使用前已经被声明，但是由于未对初始化进行提升，y 的值仍是未定义。</p>
    <br>


    <h3>例子 3 也一样：</h3>
    <p id="demo_5"></p>
    <script>
      var x_5 = 5; // 初始化 x_5
      var y_5;   // 声明 y_5

      elem_5 = document.getElementById("demo_5"); // 查找元素
      elem_5.innerHTML = x_5 + " " + y_5;       // 显示 x_5 和 y_5

      y_5 = 7;   // Assign 7 to y_5
    </script>
  </div>
  <hr>


  <div>
    <h2>在顶部声明您的变量！</h2>
    <p>Hoisting（对很多开发者来说）是 JavaScript 的一种未知的或被忽视的行为。</p>
    <p>如果开发者不理解 hoisting，程序也许会包含 bug（错误）。</p>
    <p>为了避免 bug，请始终在每个作用域的开头声明所有变量。</p>
    <p>由于这就是 JavaScript 解释代码的方式，请保持这个好习惯。</p>
    <p>严格模式中的 JavaScript 不允许在未被声明的情况下使用变量。</p>
    <p>请在下一章学习“<em>use strict</em>”。</p>
  </div>

</body>
</html>