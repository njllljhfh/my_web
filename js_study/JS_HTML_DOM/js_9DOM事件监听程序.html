<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JavaScript HTML DOM 事件监听器</title>
  <link rel="stylesheet" href="../style_sheet/my_style.css">
  <style>
    #myDiv1, #myDiv2 {
      background-color: coral;
      padding: 50px;
    }

    #myP1, #myP2 {
      background-color: white;
      font-size: 20px;
      border: 1px solid;
      padding: 20px;
    }

    #myDIV6 {
      background-color: coral;
      border: 1px solid;
      padding: 50px;
      color: white;
      font-size: 20px;
    }
  </style>
</head>
<body>
  <a href="https://www.w3school.com.cn/js/js_htmldom_eventlistener.asp">JavaScript HTML DOM 事件监听器</a>
  <hr/>


  <div>
    <h2>addEventListener() 方法</h2>
    <h3>实例</h3>
    <p>添加当用户点击按钮时触发的事件监听器：</p>
    <p>此示例使用 addEventListener() 方法将 click 事件附加到按钮。</p>
    <button id="myBtn1">试一试</button>
    <p id="demo1"></p>
    <script>
      document.getElementById("myBtn1").addEventListener("click", displayDate);

      function displayDate() {
        document.getElementById("demo1").innerHTML = Date();
      }
    </script>
    <br>


    <p><span class="code_marked">addEventListener()</span> 方法为指定元素指定事件处理程序。</p>
    <p><span class="code_marked">addEventListener()</span> 方法为元素附加事件处理程序而不会覆盖已有的事件处理程序。</p>
    <p>您能够向一个元素添加多个事件处理程序。</p>
    <p>您能够向一个元素添加多个相同类型的事件处理程序，例如两个 &quot;click&quot; 事件。</p>
    <p>您能够向任何 DOM 对象添加事件处理程序而非仅仅 HTML 元素，例如 window 对象。</p>
    <p><span class="code_marked">addEventListener()</span> 方法使我们更容易控制事件如何对冒泡作出反应。</p>
    <p>
      当使用 <span class="code_marked">addEventListener()</span> 方法时，JavaScript 与 HTML 标记是分隔的，已达到更佳的可读性；即使在不控制 HTML
      标记时也允许您添加事件监听器。
    </p>
    <p>您能够通过使用 <span class="code_marked">removeEventListener()</span> 方法轻松地删除事件监听器。</p>
  </div>
  <hr/>


  <div>
    <h2>语法</h2>
    <pre><i>element</i>.addEventListener(<i>event</i>, <i>function</i>, <i>useCapture</i>);</pre>
    <p>第一个参数是事件的类型（比如 &quot;click&quot; 或 &quot;mousedown&quot;）。</p>
    <p>第二个参数是当事件发生时我们需要调用的函数。</p>
    <p>第三个参数是布尔值，指定使用事件冒泡还是事件捕获。此参数是可选的。</p>
    <p class="important"><span>注意：</span>请勿对事件使用 &quot;on&quot; 前缀；请使用 &quot;click&quot; 代替 &quot;onclick&quot;。</p>
  </div>
  <hr/>


  <div>
    <h2>向元素添加事件处理程序</h2>
    <h3>实例</h3>
    <p>当用户点击某个元素时提示 &quot;Hello World!&quot;：</p>
    <p>此例使用 addEventListener() 方法在用户单击按钮时执行函数。</p>
    <button id="myBtn2">试一试</button>
    <script>
      document.getElementById("myBtn2").addEventListener("click", myFunction2);

      function myFunction2() {
        alert("Hello World!");
      }
    </script>
  </div>
  <hr/>


  <div>
    <h2>向相同元素添加多个事件处理程序</h2>
    <p><span class="code_marked">addEventListener()</span> 方法允许您向相同元素添加多个事件，同时不覆盖已有事件：</p>
    <h3>实例</h3>
    <p>此例使用 addEventListener() 方法在同一按钮上添加许多事件。</p>
    <button id="myBtn3">试一试</button>
    <p id="demo3"></p>
    <script>
      var x3 = document.getElementById("myBtn3");
      x3.addEventListener("mouseover", myFunction3);
      x3.addEventListener("click", mySecondFunction3);
      x3.addEventListener("mouseout", myThirdFunction3);
      x3.addEventListener("click", mySecondFunction31);

      function myFunction3() {
        document.getElementById("demo3").innerHTML += "Moused over!<br>";
      }

      function mySecondFunction3() {
        document.getElementById("demo3").innerHTML += "Clicked!<br>";
      }

      function mySecondFunction31() {
        alert("mySecondFunction31")
      }

      function myThirdFunction3() {
        document.getElementById("demo3").innerHTML += "Moused out!<br>";
      }
    </script>
  </div>
  <hr/>


  <div>
    <h2>向 Window 对象添加事件处理程序</h2>
    <p><span class="code_marked">addEventListener()</span> 允许您将事件监听器添加到任何 HTML DOM 对象上，比如 HTML 元素、HTML 对象、window
      对象或其他支持事件的对象，比如 xmlHttpRequest 对象。</p>
    <h3>实例</h3>
    <p>添加当用户调整窗口大小时触发的事件监听器：</p>

    <p>此例在 window 对象上使用 addEventListener() 方法。</p>
    <p>尝试调整此浏览器窗口的大小以触发“resize”事件处理程序。</p>
    <p id="demo4"></p>
    <script>
      window.addEventListener("resize", function () {
        document.getElementById("demo4").innerHTML = Math.random();
      });
    </script>
  </div>
  <hr/>


  <div>
    <h2>传递参数</h2>
    <p>当传递参数值时，请以参数形式使用调用指定函数的“匿名函数”：</p>
    <h3>实例</h3>
    <pre><i>element</i>.addEventListener(&quot;click&quot;, function(){ myFunction(p1, p2); });</pre>
    <br>

    <p>此例演示如何在使用 addEventListener() 方法时传递参数值。</p>
    <p>单击按钮以执行计算。</p>
    <button id="myBtn5">试一试</button>
    <p id="demo5"></p>
    <script>
      var p1 = 5;
      var p2 = 7;

      document.getElementById("myBtn5").addEventListener("click", function () {
        myFunction5(p1, p2);
      });

      function myFunction5(a, b) {
        var result = a * b;
        document.getElementById("demo5").innerHTML = result;
      }
    </script>
  </div>
  <hr/>


  <div>
    <h2>事件冒泡还是事件捕获？</h2>
    <p>在 HTML DOM 中有两种事件传播的方法：<span class="marked">冒泡和捕获</span>。</p>
    <p>事件传播是一种定义当发生事件时元素次序的方法。假如 &lt;div&gt; 元素内有一个 &lt;p&gt;，然后用户点击了这个 &lt;p&gt; 元素，应该首先处理哪个元素“click”事件？</p>
    <p>在冒泡中，最内侧元素的事件会首先被处理，然后是更外侧的：首先处理 &lt;p&gt; 元素的点击事件，然后是 &lt;div&gt; 元素的点击事件。</p>
    <p>在捕获中，最外侧元素的事件会首先被处理，然后是更内侧的：首先处理 &lt;div&gt; 元素的点击事件，然后是 &lt;p&gt; 元素的点击事件。</p>
    <p>在 addEventListener() 方法中，你能够通过使用“useCapture”参数来规定传播类型：</p>
    <pre>addEventListener(<i>event</i>, <i>function</i>, <i>useCapture</i>);</pre>
    <p>默认值是 <span class="code_marked">false</span>，将使用冒泡传播，如果该值设置为 <span class="code_marked">true</span>，则事件使用捕获传播。</p>
    <h3>实例</h3>
    <h1>JavaScript addEventListener()</h1>

    <div id="myDiv1">
      <h2>Bubbling:</h2>
      <p id="myP1">冒泡</p>
    </div>
    <br>

    <div id="myDiv2">
      <h2>Capturing:</h2>
      <p id="myP2">捕获</p>
    </div>

    <script>
      document.getElementById("myP1").addEventListener("click", function () {
        alert("myP1");
      }, false);

      document.getElementById("myDiv1").addEventListener("click", function () {
        alert("myDiv1");
      }, false);

      document.getElementById("myP2").addEventListener("click", function () {
        alert("myP2");
      }, true);

      document.getElementById("myDiv2").addEventListener("click", function () {
        alert("myDiv2");
      }, true);
    </script>
  </div>
  <hr/>


  <div>
    <h2>removeEventListener() 方法</h2>
    <p><span class="code_marked">removeEventListener()</span> 方法会删除已通过 <span
            class="code_marked">addEventListener()</span> 方法附加的事件处理程序：</p>
    <h3>实例</h3>

    <div id="myDIV6">
      <p>这个 div 元素有一个 onmousemove 事件处理程序，每次在这个橙色字段中移动鼠标时都会显示一个随机数。</p>
      <p>单击按钮以删除 div 的事件处理程序。</p>
      <button onclick="removeHandler6()" id="myBtn6">删除</button>
    </div>
    <p id="demo6"></p>
    <script>
      document.getElementById("myDIV6").addEventListener("mousemove", myFunction6);

      function myFunction6() {
        document.getElementById("demo6").innerHTML = Math.random();
      }

      function removeHandler6() {
        document.getElementById("myDIV6").removeEventListener("mousemove", myFunction6);
      }
    </script>
  </div>
  <hr/>


  <div>
    <h2>浏览器支持</h2>
    <p class="note"><span>注释：</span>IE 8、Opera 6.0 及其更早版本不支持 <span class="code_marked">addEventListener()</span> 和 <span
            class="code_marked">removeEventListener()</span> 方法。不过，对于这些特殊的浏览器版本，您可以使用 <span class="code_marked">attachEvent()</span>
      方法向元素添加事件处理程序，并由 <span class="code_marked">detachEvent()</span> 方法删除：</p>
    <pre>
<i>element</i>.attachEvent(<i>event</i>, <i>function</i>);
<i>element</i>.detachEvent(<i>event</i>, <i>function</i>);
</pre>
    <h3>实例</h3>
    <p>跨浏览器解决方案：</p>
    <p>此例演示了适用于所有浏览器的解决方案。</p>
    <button id="myBtn4">试一试</button>
    <script>
      var x4 = document.getElementById("myBtn4");
      if (x4.addEventListener) {
        x4.addEventListener("click", myFunction4);
      }
      else if (x4.attachEvent) {
        x4.attachEvent("onclick", myFunction4); // 提示attachEvent : Uncaught TypeError: x4.attachEvent is not a function
      }

      function myFunction4() {
        alert("Hello World!");
      }
    </script>
  </div>
  <hr/>


  <div>
    <h2>HTML DOM Event 对象参考手册</h2>
    <p>如需所有 HTML DOM 事件的列表，请访问我们完整的 <a href="https://www.w3school.com.cn/jsref/dom_obj_event.asp" title="HTML DOM Event 对象">HTML DOM Event
      对象参考手册</a>。</p>
  </div>
  <hr/>
</body>
</html>